<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Hometask #3</title>
	<style>
		.falseField{
			outline: solid 3px red;
		}
	</style>
</head>
<body>
<fieldset>
	<legend>
		Замена одинарных кавычек
	</legend>
	<textarea id="wrongText" cols="30" rows="10">
	</textarea>
	<button id="apply">Gotya</button>
	<button id="reset">Get back!</button>
</fieldset>
<fieldset>
	<legend>
		Проверка формы
	</legend>
	<form action="#">
		<label>
			(Минимум 2 буквы)Имя:
			<input id="urname" type="text" placeholder="Виктор">
		</label>
		<br>
		<label>
			(Прим. +7(900)4000-2018)Телефон:
			<input id="phone" type="text" value="+7">
		</label>
		<br>
		<label>
			(Прим. alex.k@mail.ru)E-mail:
			<input id="email" itype="text" placeholder="amazing@form.me">
		</label>
		<br>
		<label>
			Ваше сообщение:
			<textarea id="messages" cols="30" rows="10"></textarea>
		</label>
		<br>
		<input id="send" type="submit" value="Такс, я всё!">
		<input type="reset" value="Сбрось ка">
	</form>
</fieldset>

<script>
	var textarea = document.getElementById('wrongText');
	text = "'Lore'm ipsu'm 'dolor' sit amet, consectetur adipisicing elit. Accusamu's, at atque aut 'autem', consectetur doloribu's 'dolorum' ea et iste 'iure' labore molliti'a nostrum provident qua'e quam ratione sed 'suscipit' voluptate's.'";
	textarea.value = text;
	
	var applyButton = document.getElementById('apply');
	applyButton.addEventListener('click', function(){
		textarea.value = textarea.value.replace(/\B'\b|\b'\B|'$/g,'"');
	});
	var resetButton = document.getElementById('reset');
	resetButton.addEventListener('click', function(){
		textarea.value = text;
	});
	// Задание 2
	var send = document.getElementById('send');
	var urname = document.getElementById('urname');
	var phone = document.getElementById('phone');
	var email = document.getElementById('email');
	var messages = document.getElementById('messages');
	var urnameRE = /^[a-zA-Z]{2,}$/;
	var phoneRE = /^\+7\(\d{3}\)\d{4}-\d{4}$/;
	var emailRE = /^([a-zA-Z0-9]+(\.[a-zA-Z0-9]+)?)+@[a-zA-Z0-9]+\.[a-zA-Z]+$/;
	var messagesRE = /[a-zA-Z]+/;
	var checkThat = function (field, RE){
		if (RE.test(field.value)===false){
			field.classList.add('falseField');
		}
		else{
			if(field.classList) field.classList.remove('falseField');
		}
	}
	send.addEventListener('click', function(){
		checkThat(urname,urnameRE);
		checkThat(phone,phoneRE);
		checkThat(email,emailRE);
		checkThat(messages,messagesRE);
	});
</script>
</body>
</html>